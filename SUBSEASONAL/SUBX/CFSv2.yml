sources:
  PRCP_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 193
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.pr/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.pr/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
#      observed: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES//L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/{obs_source}T/(0000%201%20Jan%201998)/(0000%2031%20Dec%202018)/RANGEEDGES/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES/{obs_climo + '/' if obs_climo != '' else obs_climo}Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/{int(lead_high-lead_low)}/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  T2M_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 194
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.tas/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.tas/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.tas/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.tas/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  TEMP_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 195
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.ts/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.ts/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.ts/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.ts/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  UA_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 196
      note: Forecasts do not have UA field, so this will not work.
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.ua/P/{pressure}/VALUES/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.ua//P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.ua/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.ua/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [850, 200]

  VA_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 197
      note: Forecasts only have VA at 200 HPA
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.va/P/{pressure}/VALUES/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.va/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.va/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.va/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [850, 200]

  GPH_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 198
      note: Check on the pressure levels if its not working. They are not the same between HCST and FCST
    args:
      hindcast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.zg/P/{pressure}/VALUES/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag/M%5Daverage/S/-0.375/shiftGRID/S/7/STEP/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.dc9915/.zg/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub//S/7/STEP/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/7.0//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: http://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.forecast/.zg/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BL/M/S_lag%5Daverage/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/S/0.125/shiftGRID/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.zg/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/1/boxAverage/S/-2/1/0/shiftdatashort/S/(0000%2{fdate.day}%20{threeletters[fdate.month]}%20)/VALUES/%5BS_lag/M%5Daverage/S/0.125/shiftGRID/%5BS%5Daverage/sub/c:/0.001/%28m3%20kg-1%29/:c/mul/c:/1000/%28mm%20m-1%29/:c/mul/c:/86400/%28s%20day-1%29/:c/mul/c:/7.0//units//days/def/:c/mul/grid://name/%28T%29/def//units/%28months%20since%201960-01-01%29/def//standard_name/%28time%29/def//pointwidth/1/def/1/Jan/3001/ensotime/12.0/1/Jan/3001/ensotime/:grid/addGRID/T//pointwidth/0/def/pop//name/%28tp%29/def//units/%28mm%29/def//long_name/%28precipitation_amount%29/def/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'} 
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.NCEP/.CFSv2/.hindcast/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BL%5D//keepgrids/average/S/1/boxAverage/S/-2/1/0/shiftdatashort/%5BS_lag%5Daverage/S/0.375/sub/use_as_grid/S/7/STEP/S/({training_season})/VALUES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [ 500, 200]