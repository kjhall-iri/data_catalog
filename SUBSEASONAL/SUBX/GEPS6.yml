sources:
  PRCP_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 216
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201998-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.pr/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  OLR_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 217
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.rlut/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.rlut/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.rlut/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  T2M_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 218
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.tas/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.tas/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.tas/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  TEMP_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 219
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.ts/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.ts/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.ts/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
  #    observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.ts/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/L/%280%29/%287%29/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/T/0.5/add/use_as_grid/{obs_source}/T/%280000%201%20Jan%201998%29/%280000%2031%20Dec%202018%29/RANGEEDGES/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES/{obs_climo + '/' if obs_climo != '' else obs_climo}Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/{int(lead_high-lead_low)}/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  UA_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 220
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.ua/P/{pressure}/VALUES/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.ua/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.ua/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [850, 200, 100]

  VA_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 221
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.va/P/{pressure}/VALUES/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.va/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.va/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [850, 200, 100]

  GPH_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 222
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.zg/P/{pressure}/VALUES/S/(0000%202%20Jan%201998)/(0000%2027%20Dec%202017)/RANGEEDGES/S/(days%20since%201999-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/dup/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.forecast/.zg/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L%5Daverage/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.zg/P/{pressure}/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM/L/S%5Daverage/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{int(lead_high-lead_low)}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}  
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.ECCC/.GEPS6/.hindcast/.pr/S/%280000%202%20Jan%201998%29/%280000%2027%20Dec%202017%29/RANGEEDGES/S/%28days%20since%201998-01-01%29/streamgridunitconvert/L/({lead_low})/({lead_high})/RANGEEDGES/%5BL%5D//keepgrids/average/dup/S/({parse.quote('0000 '+str(GEPShdate1.day)+' '+threeletters[GEPShdate1.month])})/VALUES/.S/.gridvalues/S/exch/%7B13/%7Bdup/7/add%7Drepeat%7Dforall/VALUES/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [ 500, 200]
