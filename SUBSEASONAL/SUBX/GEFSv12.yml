sources: 
  PRCP_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 206
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.pr/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{float(tarlengths[target])}//units//days/def/%3Ac/mul/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.forecast/.pr/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.pr/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/(T)/renameGRID/pentadAverage/pentadmean/T/(S)/renameGRID/%5BS%5DregridLinear/S/1/setgridtype/pop/S/2/index/.S/SAMPLE/sub/c%3A/0.001/(m3%20kg-1)/%3Ac/mul/c%3A/1000/(mm%20m-1)/%3Ac/mul/c%3A/86400/(s%20day-1)/%3Ac/mul/c%3A/{float(tarlengths[target])}//units//days/def/%3Ac/mul/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}        
     # observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.south}/{predictand_extent.north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west}/{predictand_extent.to_strict_positive().east}/RANGEEDGES/{obsclimo2_source}/Y/{predictand_extent.south}/{predictand_extent.north}/RANGEEDGES/X/{predictand_extent.west}/{predictand_extent.east}/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/dup/T/npts//I/exch/NewIntegerGRID/replaceGRID/I/3/-1/roll/.T/replaceGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype =='cptv10.tsv' else 'data.nc'}
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  T2M_ANOMALY:
    metadata:
      id_code: 207
    driver: subxdriver
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.tas/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.tas/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.forecast/.tas/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.tas/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/(T)/renameGRID/pentadAverage/pentadmean/T/(S)/renameGRID/%5BS%5DregridLinear/S/1/setgridtype/pop/S/2/index/.S/SAMPLE/sub/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}        
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.pr/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}

  GPH_ANOMALY:
    driver: subxdriver
    metadata:
      id_code: 208
      note: GPH Anomaly only has pressure levels for the forecast dataset.
    args:
      hindcast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.zg/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/S/(days%20since%20{first_date.year}-01-01)/streamgridunitconvert/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.zg/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/to366daysample/%5BYR%5Daverage/S/sampleDOY/sub/S/({training_season})/VALUES/L/removeGRID/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      forecast: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.forecast/.zg/P/200/VALUES/S/(0000%20{fdate.day}%20{threeletters[fdate.month]}%20{fdate.year})/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/%5BM%5Daverage/L/{int(lead_high-lead_low)}/runningAverage/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.dc0018/.zg/P/{pressure}/VALUES/Y/{predictor_extent.south}/{predictor_extent.north}/RANGEEDGES/X/{predictor_extent.west}/{predictor_extent.east}/RANGEEDGES/L/({lead_low})/({lead_high})/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/(T)/renameGRID/pentadAverage/pentadmean/T/(S)/renameGRID/%5BS%5DregridLinear/S/1/setgridtype/pop/S/2/index/.S/SAMPLE/sub/S/(T)/renameGRID/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}        
      observed: https://iridl.ldeo.columbia.edu/SOURCES/.Models/.SubX/.EMC/.GEFSv12/.hindcast/.weekly/.zg/P/200/VALUES/S/(0000%20{first_date.day}%20{threeletters[first_date.month]}%20{first_date.year})/(0000%20{last_date.day}%20{threeletters[last_date.month]}%20{last_date.year})/RANGEEDGES/L/{lead_low}/{lead_high}/RANGEEDGES/L/{int(lead_high-lead_low)}/runningAverage/S/({training_season})/VALUES/L/S/add/%5BL/S%5D//T/sampleNDto1D/{obs_source}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/{f'{obs_climo}/Y/{predictand_extent.to_strict_positive().south}/{predictand_extent.to_strict_positive().north}/RANGEEDGES/X/{predictand_extent.to_strict_positive().west if obs_strict_pos else predictand_extent.to_plus_minus_180().west }/{predictand_extent.to_strict_positive().east if obs_strict_pos else predictand_extent.to_plus_minus_180().east }/RANGEEDGES/T/to366daysample/%5BYR%5Daverage/T/sampleDOY/sub/' if obs_climo != '' else ''}T/%28days%20since%201960-01-01%29/streamgridunitconvert/T/{int(lead_high-lead_low)}/runningAverage/c%3A/7.0//units//days/def/%3Ac/mul/T/2/index/.T/SAMPLE/nip/-999/setmissing_value/{'%5BX/Y%5D%5BT%5Dcptv10.tsv' if filetype == 'cptv10.tsv' else 'data.nc'}
      pressure_levels: [500 ]